流程控制
===

系统操作中的流程控制组件，主要用于对执行顺序进行控制<sup>1</sup>，从而实现复杂的自动化流程。除了系统操作的参数外，这种系统操作往往包含流程块，而流程块的搭建如同普通的步骤一样。

?> 1. 除了使用流程控制系统操作以外，当使用用例来驱动自动化测试流程执行的话，还能够通过流程的数据来实现[流程控制](flow_control)。

ASSIGN
---

将某个值赋与一个变量。

#### 输入参数

| 参数 | 说明
| ---- | ----
| 变量名  | 所需赋值的变量名。<br>变量不存在时会被自动创建。变量已存在时，变量值将会被覆盖。变量名只能包含数字，英文字母，中文或日文的字符和`_`。
| 变量值  | 所需赋给变量的值。<br>可以使用普通字符串或者脚本。使用脚本时，脚本执行的结果会作为值，赋与变量。

下面是一个变量值的示例规则。
```javascript
`
var text = "";
text = "Hello World!"
text
`
```

#### 输出结果

无

IF/ELSE
---

根据判断指定条件的满足与否，来实现不同流程块分歧的控制。条件符合时将执行IF流程块，条件不符合时将执行ELSE流程块。

#### 输入参数

| 参数 | 说明
| ---- | ----
| 满足条件 | 判断分歧控制的条件。可以使用脚本。

下面是一个满足条件的脚本示例规则。
```javascript
goToIf == "true"
```

#### 输出结果

无

SWITCH
---

根据判断指定条件的满足与否，来实现多个不同流程块分歧的控制。条件符合时将执行某个CASE流程块，所有CASE条件都不符合时将执行DEFAULT流程块。

#### 输入参数

无

#### 输出结果

无

CASE
---

根据判断指定条件的满足与否，来决定是否执行当前CASE下面的流程块。CASE只能在SWITCH的CASES流程块中使用，执行完之后即退出该SWITCH操作。

#### 输入参数

| 参数 | 说明
| ---- | ----
| 满足条件 | 判断分歧控制的条件。可以使用脚本。

下面是一个满足条件的脚本示例规则。
```javascript
goToCase == "true"
```

#### 输出结果

无

WHILE
---

根据判断指定条件的满足与否，来实现流程块循环执行的控制。条件符合时将循环执行WHILE流程块，条件不符合时循环结束。

#### 输入参数

| 参数 | 说明
| ---- | ----
| 满足条件 | 判断循环控制的条件。可以使用脚本。

下面是一个满足条件的脚本示例规则。
```javascript
goToWhile == "true"
```

#### 输出结果

无

FOR EACH
---

对于数组或者对象进行循环，获取其中的单个元素之后进行操作，前者是依次返回数组中的所有元素及其序号，后者是返回对象中的所有属性及其键值。

#### 输入参数

| 参数 | 说明
| ---- | ----
| 表达式 | JavaScript格式的表达式。返回数组或者对象。
| 元素变量名 | 用来表示单个元素的变量名。
| 循环变量名 | 用来表示循环体的变量名，对于数组是从`1`开始的序列号，对于对象则是其所有可直接枚举的键值，并按名称进行排序之后依次返回。

下面是一个返回`dataframe`数组的例子。
```javascript
myDataframe.toArray()
```

#### 输出结果

无

CONTINUE
---

在WHILE和FOR EACH的LOOP循环中，跳过后续的操作，直接进入下一个LOOP。

#### 输入参数

无

#### 输出结果

无

BREAK
---

退出WHILE和FOR EACH中的LOOP循环。

#### 输入参数

无

#### 输出结果

无

TRY/CATCH
---

用于错误处理的控制。其中包含了TRY流程块和CATCH流程块。当TRY流程块中出现错误<sup>1</sup>时，错误将被抛出，该流程块会终止并执行CATCH流程块<sup>2</sup>。当TRY流程块正常结束时，CATCH流程块则不被执行。

#### 输入参数

无

#### 输出结果

无

?> 1. 当错误步骤中包含了`ignoreError`的步骤设置来忽略错误时，错误将不会被抛出，CATCH流程块也不会被执行。

?> 2. 在CATCH流程块中，可以使用`${errorMessage}`变量来获取错误信息。

THROW
---

抛出一个用户定义的错误，以中断当前的执行。该错误可以被TRY/CATCH处理，也可以被`ignoreError`忽略。

#### 输入参数

| 参数 | 说明
| ---- | ----
| 错误信息 | 表示错误信息的文本。

#### 输出结果

无

RETURN
---

退出当前所在的流程。

#### 输入参数

无

#### 输出结果

无


EXIT
---

退出当前的执行。

#### 输入参数

无

#### 输出结果

无

ASSERT
---

用于判断当作条件的脚本的返回值，如果返回`true`，则该步骤正常结束，执行之后的步骤。如果返回非`true`时，则会发生验证错误，并将错误抛出。

#### 输入参数

| 参数 | 说明
| ---- | ----
| 条件 | 判断脚本返回值的条件。<br>可以使用返回`true`或者`false`的脚本。

下面是一个满足条件的脚本示例规则。
```javascript
goToNext == "1"
```

#### 输出结果

无

SESSION
---

操作流程的Session<sup>1</sup>，不仅可以创建新的Session，也可以切换到不同Session中去执行流程。

#### 输入参数

| 参数 | 说明
| ---- | ----
| Session名称 | 浏览器Session的名称。<br>缺省的名称是`default`。
| 动作 | 使用`新建`来创建新的Session，<br>使用`激活`来切换到指定名称的Session。
| 平台 | （可选）指定Session所在的平台。<br>支持系统定义的平台代码<sup>2</sup>和用户定义的扩展平台代码。<br>缺省是执行时指定的默认平台。

#### 输出结果

无

?> 1. 当前仅支持控制浏览器和手机App的Session。

?> 2. 系统当前支持`IE`, `Firefox`, `Chrome`, `Safari`, `Edge`和`Edge Legacy`的浏览器平台代码。