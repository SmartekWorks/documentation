流程控制
===

SWATHub提供了多种控制流程的方法来满足不同使用场景的方便使用。

* 使用流程控制的系统操作：请参见[系统操作 流程控制](sop_control)。
* 使用流程数据忽略：请参见[本章 流程数据忽略](#流程数据忽略)。
* 使用流程控制的运行设置：请参见[运行设置 流程控制](flow_step_option#流程控制)。
* 使用流程拦截器：请参见[本章 流程拦截器](#流程拦截器)。

流程数据忽略
---

一般来说在在测试自动化时，可以通过用例非常简便的控制步骤的执行逻辑。只有要搭建含有条件分歧或者循环处理等比较复杂的业务逻辑时，才需要使用到流程控制系统操作。

### 动作忽略

使用Web模型操作<sup>1</sup>的步骤中，有多个操作的时候，往往也有多个输入参数。在测试中可以省略这些参数，从而达到跳过该步骤的效果。例如，步骤的操作对象为网站的登陆界面，一般会有*用户名*的输入框（输入项目为`@{username}`）和*密码*的输入框（输入项目为`@{password}`）。`password`变量可以省略、作为密码不填的测试用例。

动作忽略有三个实现方式。

* 去掉步骤输入项目前的勾选。
* 在调用该流程或者用例中不设置这些参数。
* 步骤使用的参数属于别的参数时，会和别的参数一起被忽略。例如，表格行的选择操作如果被忽略的话，后续针对该行的操作也会被忽略。

?> 1. 目前动作忽略仅支持Web模型操作。

### 步骤忽略

有些情况下，不仅仅要忽略步骤中的一部分操作，而是要忽略整个步骤<sup>1</sup>。例如，同时增加一个正确的ASSERT和错误的ASSERT、根据不同的用例数据来控制步骤忽略。

步骤忽略有两个实现方式。

* 去掉所有步骤输入项目前的勾选。使用菜单中的**禁用所有输入项**可以快速完成设置。
* 在用例中不设置这些参数。例如，包含变量`@{SearchKey}`的网页搜索操作，在用例中`SearchKey`被禁用后，搜索按钮的操作也会被忽略。

?> 1. 可以通过设置步骤选项 `stepBypass` 来激活或禁止这个忽略机制。

流程拦截器
---

流程不但可以在场景中被调用，而且能作为流程拦截器在场景组中设置。在每个场景组中，可以设置一个前拦截器和后拦截器。

* **前拦截器**: 流程会先于场景执行。
* **后拦截器**: 流程会在场景执行结束后执行。无论场景执行成功与否，都会执行该流程。

拦截器可以更快捷地为场景组中的所有场景配置共通流程,如系统登入, 系统登出。

使用拦截器需要注意：

* 一旦设置了拦截器, 拦截器流程的参数都将被作为场景参数。所以只有`字符串`数据可以被传输到拦截器流程。
* 拦截器流程的输出参数将被忽略。
* 用例可以为拦截器流程提供数据，同时拦截器流程的执行结果也会影响场景组中的所有场景，可能造成其他场景无法执行。因此拦截器流程的修改需要十分小心，或者是不要使用拦截器流程的参数。
* 可以使用[步骤忽略](#步骤忽略)方式，通过参数来忽略拦截器流程里的步骤。
