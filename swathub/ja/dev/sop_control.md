フロー制御
===

フロー制御システムオペレーションはフローの実行経路を制御<sup>1</sup>して、より複雑な自動化フローに対応するためです。これらのシステムオペレーションに引数以外に、フローブロックもよく使われています。フローブロックは通常フローと同じようにステップで組み立てできます。

?> 1. テスト自動化でテストデータによるシンプルに[フロー制御](flow_control)を利用する方法もあります。

値セット
---

変数に値をセットします。

#### 入力引数
| 引数 | 説明
| ---- | ----
| 変数名  | セット先の変数名。<br>変数名は、数字、アルファベット、中国語/日本語の文字と_の文字列でなければなりません。
| 値  | 変数の値。<br>文字列もしくスクリプトが利用できます。スクリプトの場合に、実行結果を値としてセットします。

下記はスクリプトのサンプルです。
```javascript
`
var text = "";
text = "Hello World!"
text
`
```

#### 出力結果
なし

IF/ELSE
---

指定した条件によって、異なるフローブロックを実行するためのフロー制御を実現します。条件を満たした場合、Ifブロックは実行され、満たさない場合、Elseブロックが実行されます。

#### 入力引数
| 引数 | 説明
| ---- | ----
| 条件  | 分岐を判断する条件。<br>JSスクリプトが利用できます。

下記はスクリプトのサンプルです。
```javascript
goToIf == "true"
```

#### 出力結果
なし

SWITCH
---

指定した条件によって、複数フローブロック分岐の制御を実現します。条件を満たした時のCASEブロックが実行され、全て条件が満たさない場合に、DEFAULTブロックが実行されます。

#### 入力引数
なし

#### 出力結果
なし

CASE
---

SWITCHの配下に条件判定を行なって、満たした場合にブロックを実行します。実行完了後に自動的にSWITCHオペレーションが完了します。

#### 入力引数
| 引数 | 説明
| ---- | ----
| 条件  | 分岐を判断する条件。<br>JSスクリプトが利用できます。

下記はスクリプト条件の例です。
```javascript
goToCase == "true"
```

#### 出力結果
なし

WHILE
---

指定した条件によって、Whileブロックを繰り返しで実行するためのフロー制御を実現します。毎回ブロック実行の前に、条件のチェックが行われます。条件を満たした場合、Whileブロックは実行され、満たさない場合、繰り返しが終了します。

#### 入力引数
| 引数 | 説明
| ---- | ----
| 条件  | 繰り返しの続行を判断する条件。<br>JSスクリプトが利用できます。

下記はスクリプトのサンプルです。
```javascript
goToWhile == "true"
```

#### 出力結果
なし

FOR EACH
---

配列（順番と値）もしくはオブジェクト（キーと属性）に含まれた複数対象を順番に操作するためのフロー制御を実現します。

#### 入力引数
| 引数 | 説明
| ---- | ----
| 評価式 | 配列もしくはオブジェクトを返すJSスクリプトでの評価式。
| 対象変数名 | 評価式の配列に含まれた単一の対象を利用するための変数名。
| 回数変数名 | 繰り返しの回数を意味する変数名、配列の場合に`1`からの順番での整数です。オブジェクトの場合に、キーの名前。

下記は`dataframe`の内容を返す評価式です。
```javascript
myDataframe.toArray()
```

#### 出力結果
なし

CONTINUE
---

WHILEもしくFOR EACHのループの後続ステップを飛ばし、次のループに入ることを実現します。

#### 入力引数

なし

#### 出力結果

なし

BREAK
---

WHILEもしくFOR EACHの繰り返しを中断します。

#### 入力引数

なし

#### 出力結果

なし

TRY/CATCH
---

エラーハンドリングするためのフロー制御を実現します。TryブロックとCatchブロックは含まれます。Tryブロックにエラー<sup>1</sup>が発生しない場合、Catchブロックが無視されます。Tryブロックにエラーが発生する場合、Tryブロックの実行が中止され、Catchブロックが実行されます<sup>2</sup>。

#### 入力引数
なし

#### 出力結果
なし

?> 1. エラーのステップで`ignoreError`のステップオプションを使ってエラーを無視する場合、Catchブロックが実行しません。

?> 2. 在CATCH流程块中，可以使用`${errorMessage}`变量来获取错误信息。

THROW
---

ユーザーがエラーを定義し、実行を中断させエラーを出すためのフロー制御を実現します。THROWしたエラーはTRY/CATCHで処理されます。`ignoreError`でバイパスすることも可能です。

#### 入力引数
| 引数 | 説明
| ---- | ----
| メッセージ | エラーを説明するメッセージの文字列。

#### 出力結果
なし

RETURN
---

所在のフローを中断します。

#### 入力引数

なし

#### 出力結果

なし

EXIT
---

シナリオを中断し、正常終了します。

#### 入力引数

なし

#### 出力結果

なし

アサーション
---

スクリプトの実行結果を検証します。戻りは`true`の場合にステップが正常終了し、その他の場合にエラー終了します。

#### 入力引数
| 引数 | 説明
| ---- | ----
| 条件 | 検証用スクリプトです。<br>`true`と`false`を戻るスクリプトが利用できます。

下記はスクリプトのサンプルです。
```javascript
goToNext == "1"
```

#### 出力結果
なし

セッション制御
---

フローのセッション<sup>1</sup>を制御します。新しいセッションを作成したり、違うセッションに切り替えたりすることができます。

#### 入力引数
| 引数 | 説明
| ---- | ----
| セッション名 | 新しいセッションの名前、もしくはターゲットセッションの名前。<br>デフォルトセッション名は、`default`。
| アクション       | `新規作成`は新しいセッションを作成します。<br>`切り替え`は、指定したセッションに切り替えます。
| プラットフォーム | （省略可）セッション所在のプラットフォームを指定します。<br>システムで定義したプラットフォームコード<sup>2</sup>とユーザーが定義した拡張プラットフォームコードを対応します。<br>デフォルトは実行時に指定したデフォルトプラットフォームです。

#### 出力結果
なし

?> 1. 現在ブラウザーとモバイルアプリのセッションを対応しています。

?> 2. 現在`IE`, `Firefox`, `Chrome`, `Safari`, `Edge`和`Edge Legacy`のプラットフォームコートが利用できます。