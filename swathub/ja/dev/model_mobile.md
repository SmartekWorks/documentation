APPモデル
===

スマホアプリの開発について、主に三つの仕組みがあります。

* スマホネイティブのアプリ開発（Native APP）
* Webのアプリ開発（H5 APP）
* 上記両方を含むハイブリッドアプリの開発（Hybrid APP）

そのうちH5　APPはスマホのブラウザで動くWebアプリのため、Webモデルで対応が可能です。

Native APPの場合に、現在iOSとAndroid二つのプラットフォームがあります。それぞれ異なるUIの構成と仕組みがありますがSWATHubは両方に対応しており、操作対象をローケーティングしたり、操作したりするモデルを構築することができます。

ハイブリットアプリはNative APPの中にWebViewのコンポーネントでWebアプリの内容を表示します。SWATHubは両方を識別し、それぞれモデリングすることが可能です。実行時においても2種類のモデル<sup>1</sup>をシームレスに切り替えができ、スマホアプリの自動化を実現します。

?> 1. WebViewタイプのモデルは実質Webモデルですが、利用シーンを考えて、APPモデルに説明します。

モデル構築
---

SWATHubロボットのモデルキャプチャーツールを利用してスマホAPPのモデルソースファイルを取得します。ソースファイルにNativeの部分とWebViewの部分は別れています。Nativeの部分に対して、一連のアクションコマンドでAPPオペレーションを定義し、モデルを構築します。WebViewの部分に対して、モデリングエンジンを利用してモデルを自動構築します。

詳細の手順は[マニュアル](../manual/design_model#appモデル)を参照してください。WebViewのモデル構築について[Webモデル](model_web)を参照してください。

### APPアクションコマンド
ネイティブのAPPオペレーションは一連のAPPアクションコマンドで定義しています。APPオペレーションの実行時にそれらのAPPアクションコマンドを順番に実施します。下記は現在サポートしているGUIアクションコマンドです。

#### タップ
APPの操作対象をローケーティングし、タップします。

##### 入力引数
| 項目 | 説明
| ---------- | -----------
| ターゲット  | APPの操作対象をローケーティングするためのxPath、文字列を使用します。<br>ソースナビゲーターから対象を選択して自動セットします。

##### 出力結果
なし

#### テキスト記入
APPの操作対象をローケーティングし、テキストを記入します。

##### 入力引数
| 項目 | 説明
| ---------- | -----------
| ターゲット  | APPの操作対象をローケーティングするためのxPath、文字列を使用します。<br>ソースナビゲーターから対象を選択して自動セットします。
| テキスト  |  記入するためのテキスト。

##### 出力結果
なし

#### スワイプ
APPのスクリーンにスワイプをします。

##### 入力引数
| 項目 | 説明
| ---------- | -----------
| ルート  | スワイプの各ポイントの座標の二階層JSON配列<br>`[[x1,y1], [x2,y2], ...[xn,yn]]`です。

##### 出力結果
なし

#### 画像探し
このコマンドは実行時に指定した画像を探します。

##### 入力引数
| 項目 | 説明
| ---------- | -----------
| 画像 | インポートしたAPPのスクリーン上で画像エリアを定義する<br>`[x,y,width,height]`のJSON配列です。

##### 出力結果
APPのスクリーン上で見つける画像情報を定義します。画像情報は画像のエリアを定義する`[x,y,width,height]`のJSON配列です。

#### 画像取得
このコマンドは実行時に指定した画像をAPPのスクリーン上で探し、**Base64**フォーマットの画像データを取得します。

##### 入力引数
| 項目 | 説明
| ---------- | -----------
| 画像 | インポートしたAPPのスクリーン上で画像エリアを定義する<br>`[x,y,width,height]`のJSON配列です。
| オフセットエリア | (省略可) 定義した画像と離れた画像エリアを指定するためのオフセット<br>`[x,y,width,height]`のJSON配列です。セットしない場合、定義した画像を取得します。

##### 出力結果
APPのスクリーン上に見つけた画像データ。画像データはBase64の文字列にエンコードされます。

#### 画像クリック
このコマンドは実行時にAPPのスクリーン上で指定した画像を探して、クリックします。

##### 入力引数
| 項目 | 説明
| ---------- | -----------
| 画像 | インポートしたAPPのスクリーン上で画像エリアを定義する<br>`[x,y,width,height]`のJSON配列です。
| オフセットエリア | (省略可) 定義した画像と離れた画像エリアを指定するためのオフセット<br>`[x,y,width,height]`のJSON配列です。セットしない場合、定義した画像を取得します。

##### 出力結果
なし

#### 画像チェック
このコマンドは実行時にAPPのスクリーン上で指定した画像が存在するかどうかをチェックし、結果を返します。

##### 入力引数
| 項目 | 説明
| ---------- | -----------
| 画像  | インポートしたスクリーン上で画像エリアを定義する<br>`[x,y,width,height]`のJSON配列です。
| 変数  | (省略可)このコマンドでチェックした結果（`true`もしく`false`）を格納した変数の名前。

##### 出力結果
なし

オペレーション引数
---

APPオペレーションの入力引数はユーザがオペレーション定義に使った変数になります。APPオペレーションには出力引数はありません。
