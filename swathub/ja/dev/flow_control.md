フロー制御
===

SWATHubはいくつかの方法でフローの実行ロジックを制御する方法提供し、様々なシナリオを対応しています。

* フロー制御システムオペレーションを利用：[フロー制御システムオペレーション](sop_control)を参照。
* フローデータバイパスを利用：[フローデータバイパス](#フローデータバイパス)を参照。
* フロー制御ステップオプションを利用：[フロー制御ステップオプション](flow_step_option#フロー制御)。
* インターセプターを利用：[インターセプター](#インターセプター)を参照。

フローデータバイパス
---

分岐や繰り返しのある複雑なシナリオを構築するために、フロー制御システムオペレーションを利用する必要がありますが、テスト自動化の場合シナリオのデータ（テストケース）で簡単のシナリオ制御を実現することも可能です。

### アクションバイパス

Webオペレーションステップ<sup>1</sup>に複数アクションが存在する場合に、通常複数の引数を持ちます。テスト実行中にいくつかの引数を省略することで、関連するアクションを飛ばすことが可能です。例えば、*ログイン*オペレーションは、通常、*ユーザー名*テキストボックス（変数として`@{username}`）と*パスワード*テキストボックス（変数として`@{password}`）を持ちます。`password`変数を省略して、Password未記入のテストケースを作成することができます。

引数をバイパスするには3つの方法があります。

* ステップ名の前のチェックボックスをオフにして、入力引数を無効にします。入力引数の**<i class="fa fa-square-o"></i>すべての入力引数を無効</a>**コンテキストメニューを使用して、すべての入力引数を無効にすることができます。
* 入力引数データで利用した変数を無効にします。
* 引数が別の引数に属している場合は、親引数をバイパスするとバイパスされます。たとえば、行の選択アクションをバイパスすると、テーブル行のアクションはバイパスされます。

?> 1. 現在アクションのバイパスはWebオペレーションのみ対応しています。

### ステップバイパス

場合によっては、ステップの一部アクションだけでなく、ステップ全体をバイパスする必要があります。たとえば、通常のケースと異常なケースの両方のアサーションステップを同じシナリオに追加し、異なるケースデータを定義してどっちかのアサーションステップをバイパスすることができます<sup>1</sup>。

ステップの実行は2つの方法でバイパスできます。

* ステップのすべての入力引数を無効にします。フローから該当ステップを削除することと同じです。
* 入力引数に定義されているすべての変数を無効にします。例えば、変数`@{SearchKey}`を含む検索オペレーションで変数`SearchKey`はテストケースで無効になっているとき検索ボタンはバイパスされます。

?> 1. ステップオプションの`stepBypass`でこの仕組みを無効にすることが出来ます。

インターセプター
---

シナリオにフローのステップを定義する以外に、シナリオグループ範囲のすべてのシナリオの前後に共通的なフローを定義することも可能です。これらのフローをインターセプターと呼びます。

* **前インターセプター**: シナリオの前に実行されるフローです。
* **後インターセプター**: シナリオ自体が成功したか失敗したか関係なく、シナリオの後に実行されるフローです。

インターセプターを使用して共通のフローを追加することは便利な方法です。例えば、ログイン、ログアウトのようなすべてのシナリオで利用される場合です。

インターセプターを利用する際に下記を注意すべきです。

* インターセプターの引数の入力データはシナリオの入力データの一部になります。そのため、文字列タイプのデータしか利用できません。
* インターセプターの出力データを利用することはできません。
* インターセプターの変更によって、必要なデータの増減が発生し、既存のテストケースがシナリオで利用できなくなる可能性があります。全体を考慮した上でインターセプターを変更するか、引数ーのないインターセプターを利用することをお勧めです。
* [ステップバイパス](#ステップバイパス) を使うことで、引数を使用したインターセプターをバイパスすることが可能です。
